<nz-layout>
  <nz-sider nzTheme="light" nzWidth="150px">
    <ul nz-menu nzMode="inline" [nzSelectable]="false">
      <ng-container
        *ngTemplateOutlet="
          menuTemplate;
          context: { $implicit: blocklier.categories }
        "
      ></ng-container>
      <ng-template let-categories #menuTemplate>
        <ng-container *ngFor="let category of _categoriesType(categories)">
          <li
            nz-menu-item
            *ngIf="!category.children.length"
            [nzPaddingLeft]="16 + category.depth * 8"
            (click)="
              $event.stopPropagation();
              category.$row.click();
              categorySelected == category
                ? (categorySelected = undefined)
                : (categorySelected = category)
            "
            [nzSelected]="categorySelected == category"
          >
            <i nz-icon nzType="border"></i>
            <span>{{ category.name }}</span>
          </li>
          <li
            nz-submenu
            *ngIf="category.children.length"
            [nzPaddingLeft]="16 + category.depth * 8"
            [nzTitle]="category.name"
          >
            <ul>
              <ng-container
                *ngTemplateOutlet="
                  menuTemplate;
                  context: { $implicit: category.children }
                "
              ></ng-container>
            </ul>
          </li>
        </ng-container>
      </ng-template>
    </ul>
  </nz-sider>
  <nz-content>
    <app-blocklier
      (init)="workspace = blocklier.workspace"
      (change)="change.emit()"
      #blocklier
    ></app-blocklier>
  </nz-content>
</nz-layout>
